/*
jQuery Credit Card Validator
Copyright 2012 Pawel Decowski
This work is licensed under the Creative Commons Attribution-ShareAlike 3.0 Unported License.
To view a copy of this license, visit http://creativecommons.org/licenses/by-sa/3.0/
http://github.com/PawelDecowski/jQuery-CreditCardValidator
*/
(function(){var e,n=[].indexOf||function(e){for(var c=0,g=this.length;c<g;c++)if(c in this&&this[c]===e)return c;return-1};e=jQuery;e.fn.validateCreditCard=function(m){var c,g,i,j,k,h,l;c=[{name:"amex",pattern:/^3[47]/,valid_length:[15]},{name:"diners_club_carte_blanche",pattern:/^30[0-5]/,valid_length:[14]},{name:"diners_club_international",pattern:/^36/,valid_length:[14]},{name:"jcb",pattern:/^35(2[89]|[3-8][0-9])/,valid_length:[16]},{name:"laser",pattern:/^(6304|670[69]|6771)/,valid_length:[16,
17,18,19]},{name:"visa_electron",pattern:/^(4026|417500|4508|4844|491(3|7))/,valid_length:[16]},{name:"visa",pattern:/^4/,valid_length:[16]},{name:"mastercard",pattern:/^5[1-5]/,valid_length:[16]},{name:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,valid_length:[12,13,14,15,16,17,18,19]},{name:"discover",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,valid_length:[16]}];g=function(a){var d,b,f;b=0;for(f=c.length;b<f;b++)if(d=c[b],a.match(d.pattern))return d;
return null};j=function(a){var d,b,f,c,e;b=0;e=a.split("").reverse();d=f=0;for(c=e.length;f<c;d=++f)a=e[d],a=+a,d%2?(a*=2,b=10>a?b+a:b+(a-9)):b+=a;return 0===b%10};i=function(a,d){var b;return b=a.length,0<=n.call(d.valid_length,b)};l=function(a){var d,b,c;d=g(a);b=c=!1;null!=d&&(c=j(a),b=i(a,d));return m({card_type:d,luhn_valid:c,length_valid:b})};h=function(){var a;a=k(e(this).val());return l(a)};k=function(a){return a.replace(/[ -]/g,"")};this.bind("input",function(){e(this).unbind("keyup");return h.call(this)});
this.bind("keyup",function(){return h.call(this)});0!==this.length&&h.call(this);return this}}).call(this);